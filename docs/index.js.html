<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** Require the NodeJS file utils librabry
    @constant
    @type {object}
 */
const fs = require("fs");
/** Require the Cheerio third-party librabry
 * {@link https://cheerio.js.org/}
    @constant
    @type {object}
 */
const cheerio = require("cheerio");

let raw_html = fs.readFileSync("data/raw/chinese-culture.html");
let $ = cheerio.load(raw_html);
// An object to store country culture data
let country_culture = {};
// Get the country name
let country_name = $("h1").text().replace(/-/gm, "");
country_culture[country_name] = [];
$(".text-content")
  .find(".culture-subheading")
  .each(function () {
    let data = {};
    data["type"] = $(this).text(); // Get Dos or Donts
    country_culture[country_name].push(data);
  });

$(".text-content")
  .find("ul")
  .each(function (index) {
    country_culture[country_name][index]["list"] = extractText($(this), "li"); // Add bullet points
  });

console.log(JSON.stringify(country_culture));
// Store parsed data into json file
fs.writeFileSync("data/chinese-culture.json", JSON.stringify(country_culture));

/*
  Utility Functions
*/

/** Extract simple text from the child elements (li) of a parent element (ul).
  @function
  @param {object} element A Cheerio parent element
  @param {string} selector A CSS selector for child elements
  @returns {Array} The child's text content
*/

function extractText(element, selector) {
  let list = [];
  element.find(selector).each(function () {
    list.push($(this).text());
  });
  return list;
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#cheerio">cheerio</a></li><li><a href="global.html#extractText">extractText</a></li><li><a href="global.html#fs">fs</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Tue Mar 02 2021 15:56:33 GMT-0600 (Central Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
